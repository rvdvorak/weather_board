{% extends 'weather_app/widget.html' %}

{% block widget_style %}lightblue{% endblock %}

{% block widget_header_icon %}
<i class="fas fa-forward" style="width: 1.5em;"></i>
{% endblock %}

{% block widget_header_text %}48 h summary forecast{% endblock %}

{% block widget_content %}

<table class="table table-sm table-hover">
    <tbody>
        {% if not weather.hourly.0.dt|date:"H:i" == '00:00' %}
        <tr style="background-color: silver;">
            <td colspan="4" style="text-align: center; vertical-align: middle;" >
                <b>
                    {{ weather.hourly.0.dt|date:"D, j. M Y" }}
                </b>
            </td>
        </tr>
        {% endif %}

        {% for hour in weather.hourly %}
        
        {% if hour.dt|date:"H:i" == '00:00' %}
        <tr style="background-color: silver;">
            <td colspan="4" style="text-align: center; vertical-align: middle;" >
                <b>
                    {{ hour.dt|date:"D, j. M Y" }}
                </b>
            </td>
        </tr>
        {% endif %}
            
        <tr>
            <td style="text-align: left; vertical-align: middle;" >{{ hour.dt|date:"H:i" }}</td>
            <td style="text-align: right; vertical-align: middle;">{{ hour.temp|floatformat:0 }} Â°C</td>
            <td style="text-align: right; vertical-align: middle;" >
                {% comment %}
                Convert precipitation probability to percents (multiply by 100)
                {% endcomment %}
                {% widthratio hour.pop 1 100 %} %
                <i class="fas fa-cloud-showers-heavy"></i>
            </td>
            <td style="text-align: right; vertical-align: middle; padding-top: 0em; padding-bottom: 0em;">
                <img width="50px" height="50px" src="https://openweathermap.org/img/wn/{{ hour.weather.0.icon }}@2x.png"
                    alt="{{ hour.weather.0.description|capfirst }}">
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>

{% endblock widget_content %}